# Руководство по обновлению записей в таблице (PostgreSQL)

В этом руководстве рассмотрим способы обновления данных в таблице с использованием SQL. Также продемонстрируем действие `ON UPDATE CASCADE` и `ON UPDATE RESTRICT`.

---

## 1. Обновление записей в таблице

Для обновления данных в таблице используется команда `UPDATE`.

### Пример 1: Обновление одного поля

Обновим поле `fullname` в таблице `Employee`:

```sql
UPDATE Employee
SET fullname = 'Иванов Иван Иванович'
WHERE id = 1;
```

### Пример 2: Обновление нескольких полей

Обновим сразу несколько полей в таблице `Storage`:

```sql
UPDATE Storage
SET address = 'ул. Пушкина, д. 10',
    phone = '111-222-3333'
WHERE id = 1;
```

---

## 2. Действие `ON UPDATE CASCADE`

Если внешний ключ связан с действием `ON UPDATE CASCADE`, то при обновлении значения первичного ключа в родительской таблице все связанные записи в дочерней таблице будут автоматически обновлены.

### Пример:

В таблице `Product` обновим `id` продукта. Таблица `ProductCost` настроена на `ON UPDATE CASCADE` для внешнего ключа `product_id`.

```sql
-- Обновляем id продукта
UPDATE Product
SET id = 10
WHERE id = 1;

-- Проверяем изменения в таблице ProductCost
SELECT * FROM ProductCost WHERE product_id = 10;
```

Результат: В таблице `ProductCost` автоматически обновится значение `product_id` для всех записей, связанных с продуктом, чей `id` был обновлён.

---

## 3. Действие `ON UPDATE RESTRICT`

Если внешний ключ связан с действием `ON UPDATE RESTRICT`, то обновление значения первичного ключа в родительской таблице будет запрещено, если существуют связанные записи в дочерней таблице.

### Пример:

Попробуем обновить `id` склада в таблице `Storage`. Таблица `Work` настроена на `ON UPDATE RESTRICT` для внешнего ключа `storage_id`.

```sql
-- Пытаемся обновить id склада
UPDATE Storage
SET id = 5
WHERE id = 1;
```

Результат: Запрос завершится ошибкой, так как существуют связанные записи в таблице `Work`.

---

## 4. Массовое обновление записей

Для массового обновления всех записей можно использовать команды без `WHERE`:

### Пример:

Установим значение `is_manager` в `FALSE` для всех сотрудников:

```sql
UPDATE Employee
SET is_manager = FALSE;
```

---

## Заключение

Теперь вы знаете, как обновлять данные в таблице и как работают действия `ON UPDATE CASCADE` и `ON UPDATE RESTRICT`. Используйте эти примеры для управления данными в вашей базе данных.

