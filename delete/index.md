# Руководство по удалению записей из таблицы (PostgreSQL)

В этом руководстве рассмотрим, как удалять данные из таблиц с использованием SQL. Также продемонстрируем действие `ON DELETE CASCADE` и `ON DELETE RESTRICT`.

---

## 1. Удаление записей из таблицы

Для удаления данных из таблицы используется команда `DELETE`.

### Пример 1: Удаление одной записи

Удалим сотрудника с `id = 1` из таблицы `Employee`:

```sql
DELETE FROM Employee
WHERE id = 1;
```

### Пример 2: Удаление всех записей

Удалим все записи из таблицы `Product`:

```sql
DELETE FROM Product;
```

> **Внимание:** Удаление всех записей без условия `WHERE` приведет к очистке таблицы.

---

## 2. Действие `ON DELETE CASCADE`

Если внешний ключ связан с действием `ON DELETE CASCADE`, то при удалении записи в родительской таблице все связанные записи в дочерней таблице будут автоматически удалены.

### Пример:

Удалим продукт с `id = 1` из таблицы `Product`. Таблица `ProductCost` настроена на `ON DELETE CASCADE` для внешнего ключа `product_id`.

```sql
-- Удаляем запись из таблицы Product
DELETE FROM Product
WHERE id = 1;

-- Проверяем, что связанные записи в таблице ProductCost также удалены
SELECT * FROM ProductCost WHERE product_id = 1;
```

Результат: Все записи из таблицы `ProductCost`, связанные с продуктом с `id = 1`, будут автоматически удалены.

---

## 3. Действие `ON DELETE RESTRICT`

Если внешний ключ связан с действием `ON DELETE RESTRICT`, то удаление записи в родительской таблице будет запрещено, если существуют связанные записи в дочерней таблице.

### Пример:

Попробуем удалить склад с `id = 1` из таблицы `Storage`. Таблица `Work` настроена на `ON DELETE RESTRICT` для внешнего ключа `storage_id`.

```sql
-- Пытаемся удалить запись из таблицы Storage
DELETE FROM Storage
WHERE id = 1;
```

Результат: Запрос завершится ошибкой, так как существуют связанные записи в таблице `Work`.

---

## 4. Удаление записей с условиями

Можно удалять данные на основе сложных условий.

### Пример:

Удалим всех сотрудников, чьё имя начинается с "Иван":

```sql
DELETE FROM Employee
WHERE fullname LIKE 'Иван%';
```

---

## Заключение

Теперь вы знаете, как удалять записи из таблиц, а также понимаете работу действий `ON DELETE CASCADE` и `ON DELETE RESTRICT`. Соблюдайте осторожность при удалении данных, чтобы избежать потери важной информации.

